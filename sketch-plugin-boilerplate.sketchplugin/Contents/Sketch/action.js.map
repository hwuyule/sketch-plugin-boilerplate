{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./node_modules/mocha-js-delegate/index.js","webpack://exports/./src/action.js","webpack://exports/./src/common/config.js","webpack://exports/./src/session.js","webpack://exports/./src/utils/element.js","webpack://exports/./src/utils/file.js","webpack://exports/./src/utils/index.js","webpack://exports/./src/utils/selector.js","webpack://exports/./src/utils/system.js","webpack://exports/external \"sketch\""],"names":["onOpenDocument","context","console","error","isShow","getSettingForKey","SidePanelIdentifier","setTimeout","toggleSidePanelCommand","command","pluginBundle","commands","AppController","sharedInstance","runPluginCommand_fromMenu_context","onCloseDocument","COScript","currentCOScript","setShouldKeepAround","IdentifierPrefix","WINDOW_MOVE_INSTANCE","WINDOW_MOVE_SELECTOR","Menus","rect","NSMakeRect","size","NSMakeSize","icon","activeIcon","tooltip","identifier","NSUUID","UUID","UUIDString","wkIdentifier","type","inGravityType","url","document","version","sketchVersion","pluginFolderPath","resourcesPath","getPluginFolderPath","split","scriptPath","splice","join","ctx","MSDocument","currentDocument","String","plugin","toString","api","getImageURL","name","isRetinaDisplay","NSScreen","mainScreen","backingScaleFactor","suffix","pluginSketch","imageURL","URLByAppendingPathComponent","createImage","Image","NSImage","alloc","initWithContentsOfURL","setSize","setScalesWhenResized","createImageView","imageView","NSImageView","initWithFrame","image","setImage","setAutoresizingMask","createBoxSeparator","separtorBox","NSBox","NSZeroRect","setBoxType","NSBoxSeparator","setBorderColor","NSColor","colorWithHex","colorWithSRGBRed_green_blue_alpha","addButton","callAction","button","NSButton","init","activeImageURL","activeImage","setAlternateImage","setBordered","sizeToFit","setToolTip","setButtonType","NSMomentaryChangeButton","setCOSJSTargetFunction","setAction","removeBadge","hasBadge","createBounds","x","y","width","height","createPanel","options","minWidth","minHeight","title","vibrancy","threadDictionary","NSThread","mainThread","mainScreenRect","screens","firstObject","frame","Bounds","Math","round","NSWidth","NSHeight","panel","NSPanel","setFrame_display","setOpaque","setStyleMask","NSWindowStyleMaskFullSizeContentView","NSBorderlessWindowMask","NSResizableWindowMask","NSTexturedBackgroundWindowMask","NSTitledWindowMask","NSClosableWindowMask","NSFullSizeContentViewWindowMask","NSWindowStyleMaskResizable","setBackgroundColor","whiteColor","windowBackgroundColor","movableByWindowBackground","titlebarAppearsTransparent","titleVisibility","NSWindowTitleHidden","center","makeKeyAndOrderFront","setLevel","NSFloatingWindowLevel","minSize","standardWindowButton","NSWindowZoomButton","setHidden","NSWindowMiniaturizeButton","NSWindowCloseButton","setEnabled","NSWindowFullScreenButton","showsToolbarButton","effectView","NSVisualEffectView","setMaterial","NSVisualEffectMaterialPopover","NSViewWidthSizable","NSViewHeightSizable","setAppearance","NSAppearance","appearanceNamed","NSAppearanceNameVibrantLight","setBlendingMode","NSVisualEffectBlendingModeBehindWindow","contentView","addSubview","closeButton","sender","log","close","removeObjectForKey","createView","view","NSView","setFlipped","createBox","box","setTitle","createTextField","string","field","NSTextField","setStringValue","setFont","NSFont","systemFontOfSize","setTextColor","colorWithCalibratedRed_green_blue_alpha","setBezeled","setEditable","File","fileManager","NSFileManager","defaultManager","_stringify","jsonData","opt","nsJson","NSJSONSerialization","dataWithJSONObject_options_error_","nil","NSString","initWithData_encoding","writeFile","content","path","stringWithFormat","writeToFile_atomically_encoding_error_","copyFile","dist","fileExistsAtPath","copyItemAtPath_toPath_error","mkDir","createDirectoryAtPath_withIntermediateDirectories_attributes_error_","readJSON","src","NSData","dataWithContentsOfFile","JSONObjectWithData_options_error","patch","attributesOfItemAtPath_error","NSFileSize","e","renameFile","from","to","moveItemAtPath_toPath_error","exist","readDir","contentsOfDirectoryAtPath_error_","removeDir","removeItemAtPath_error","getTempDirPath","URL","URLsForDirectory_inDomains","lastObject","hash","Date","now","nsString","mkTempDir","saveImage","tiffData","TIFFRepresentation","p","NSBitmapImageRep","imageRepWithData","data","representationUsingType_properties","NSPNGFileType","writeToFile_atomically","jsonFilePaths","filename","ds","enumeratorAtPath","paths","nextObject","pathExtension","push","getSketchSelected","Document","sketch","getSelectedDocument","page","selectedPage","artboard","Artboard","fromNative","_object","currentArtboard","selection","selectedLayers","getSelected","currentPage","artboards","selectedArtboard","getScriptExecPath","getDocumentPath","fileURL","getDocumentName","lastPathComponent","dumpLayer","sketchObject","treeAsDictionary","nsData","initWithData_encoding_","dumpSymbol","symbolInstance","immutableInstance","immutableModelObject","MSJSONDataArchiver","archiveStringWithRootObject_error","getNewUUID","getThreadDictForKey","key","setThreadDictForKey","value","removeThreadDictForKey","NSUserDefaults","standardUserDefaults","objectForKey","setSettingForKey","setObject_forKey","removeSettingForKey","showPluginsPane","MSPluginsPreferencePane","preferencesController","MSPreferencesController","sharedController","switchToPaneWithIdentifier","currentPreferencePane","tableView","reloadData","showLibrariesPane","MSAssetLibrariesPreferencePane","getSystemVersion","systemVersion","NSProcessInfo","processInfo","operatingSystemVersionString","match","versions","length","concat","getPluginVersion","reloadPlugins","pluginManager","getFileContentFromModal","fileTypes","openPanel","NSOpenPanel","canCreateDirectories","canChooseFiles","allowedFileTypes","openPanelButtonPressed","runModal","NSModalResponseOK","filePath","stringWithContentsOfFile_encoding_error","NSUTF8StringEncoding","getSavePathFromModal","fileName","savePanel","NSSavePanel","nameFieldStringValue","savePanelActionStatus","observerWindowResizeNotification","fn","Selector","NSSelectorFromString","delegate","MochaJSDelegate","notification","delegateInstance","getClassInstance","NSNotificationCenter","defaultCenter","addObserver_selector_name_object","NSWindowDidResizeNotification","removeObserverWindowResizeNotification","removeObserver_name_object"],"mappings":";;;;;;;;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,wDAAwD,EAAE;AACxE;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,uCAAuC;AACvC;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC/FA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEO,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,OAAO,EAAI;AACvCC,SAAO,CAACC,KAAR,CAAc,2BAAd;AACA,MAAMC,MAAM,GAAGC,+DAAgB,CAACC,kEAAD,CAA/B;AACAJ,SAAO,CAACC,KAAR,CAAc,mBAAd,EAAmCC,MAAnC;;AACA,MAAIA,MAAJ,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","file":"action.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/action.js\");\n","/* globals MOClassDescription, NSObject, NSSelectorFromString, NSClassFromString, MOPropertyDescription */\n\nmodule.exports = function MochaDelegate(definition, superclass) {\n  var uniqueClassName =\n    'MochaJSDelegate_DynamicClass_' + NSUUID.UUID().UUIDString()\n\n  var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(\n    uniqueClassName,\n    superclass || NSObject\n  )\n\n  // Storage\n  var handlers = {}\n  var ivars = {}\n\n  // Define an instance method\n  function setHandlerForSelector(selectorString, func) {\n    var handlerHasBeenSet = selectorString in handlers\n    var selector = NSSelectorFromString(selectorString)\n\n    handlers[selectorString] = func\n\n    /*\n      For some reason, Mocha acts weird about arguments: https://github.com/logancollins/Mocha/issues/28\n      We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n    */\n    if (!handlerHasBeenSet) {\n      var args = []\n      var regex = /:/g\n      while (regex.exec(selectorString)) {\n        args.push('arg' + args.length)\n      }\n\n      // eslint-disable-next-line no-eval\n      var dynamicFunction = eval(\n        '(function (' +\n          args.join(', ') +\n          ') { return handlers[selectorString].apply(this, arguments); })'\n      )\n\n      delegateClassDesc.addInstanceMethodWithSelector_function(\n        selector,\n        dynamicFunction\n      )\n    }\n  }\n\n  // define a property\n  function setIvar(key, value) {\n    var ivarHasBeenSet = key in handlers\n\n    ivars[key] = value\n\n    if (!ivarHasBeenSet) {\n      delegateClassDesc.addInstanceVariableWithName_typeEncoding(key, '@')\n      var description = MOPropertyDescription.new()\n      description.name = key\n      description.typeEncoding = '@'\n      description.weak = true\n      description.ivarName = key\n      delegateClassDesc.addProperty(description)\n    }\n  }\n\n  this.getClass = function() {\n    return NSClassFromString(uniqueClassName)\n  }\n\n  this.getClassInstance = function(instanceVariables) {\n    var instance = NSClassFromString(uniqueClassName).new()\n    Object.keys(ivars).forEach(function(key) {\n      instance[key] = ivars[key]\n    })\n    Object.keys(instanceVariables || {}).forEach(function(key) {\n      instance[key] = instanceVariables[key]\n    })\n    return instance\n  }\n  // alias\n  this.new = this.getClassInstance\n\n  // Convenience\n  if (typeof definition === 'object') {\n    Object.keys(definition).forEach(\n      function(key) {\n        if (typeof definition[key] === 'function') {\n          setHandlerForSelector(key, definition[key])\n        } else {\n          setIvar(key, definition[key])\n        }\n      }\n    )\n  }\n\n  delegateClassDesc.registerClass()\n}\n","import { SidePanelIdentifier } from './common/config'\nimport { getSettingForKey } from './utils'\n\nexport const onOpenDocument = context => {\n  console.error('✅✅✅ action onOpenDocument')\n  const isShow = getSettingForKey(SidePanelIdentifier)\n  console.error('✅✅✅ action isShow', isShow)\n  if (isShow) {\n    setTimeout(() => {\n      const toggleSidePanelCommand = context.command.pluginBundle().commands()['sketch-plugin-boilerplate.toggle-side-panel']\n      context.command = toggleSidePanelCommand\n      AppController.sharedInstance().runPluginCommand_fromMenu_context(\n        toggleSidePanelCommand,\n        false,\n        context\n      )\n    }, 100)\n  }\n}\n\nexport const onCloseDocument = () => {\n  console.error('✅✅✅action', 'onCloseDocument')\n  COScript.currentCOScript().setShouldKeepAround(false)\n}\n","export const IdentifierPrefix = 'sketch-plugin-boilerplate'\nexport const SidePanelIdentifier = `${IdentifierPrefix}.side-panel-identifier`\nexport const WINDOW_MOVE_INSTANCE = 'WINDOW_MOVE_INSTANCE'\nexport const WINDOW_MOVE_SELECTOR = 'WINDOW_MOVE_SELECTOR'\n\nexport const Menus = [\n  {\n    rect: NSMakeRect(0, 0, 40, 40),\n    size: NSMakeSize(24, 24),\n    icon: 'artboard',\n    activeIcon: 'artboard-active',\n    tooltip: '上传画板',\n    identifier: `${IdentifierPrefix}-menu.artboard-${NSUUID.UUID().UUIDString()}`,\n    wkIdentifier: `${IdentifierPrefix}-webview.artboard-${NSUUID.UUID().UUIDString()}`,\n    type: 2,\n    inGravityType: 1,\n    url: 'https://aotu.io',\n  },\n  {\n    rect: NSMakeRect(0, 0, 40, 40),\n    size: NSMakeSize(24, 24),\n    icon: 'icon',\n    activeIcon: 'icon-active',\n    tooltip: '图标',\n    identifier: `${IdentifierPrefix}-menu.icon-${NSUUID.UUID().UUIDString()}`,\n    wkIdentifier: `${IdentifierPrefix}-webview.icon-${NSUUID.UUID().UUIDString()}`,\n    type: 2,\n    inGravityType: 1,\n    url: 'https://docs.pfan123.com/',\n  },\n  {\n    rect: NSMakeRect(0, 0, 40, 40),\n    size: NSMakeSize(24, 24),\n    icon: 'component',\n    activeIcon: 'component-active',\n    tooltip: '组件',\n    identifier: `${IdentifierPrefix}-menu.component-${NSUUID.UUID().UUIDString()}`,\n    wkIdentifier: `${IdentifierPrefix}-webview.component-${NSUUID.UUID().UUIDString()}`,\n    type: 2,\n    inGravityType: 1,\n    url: 'http://m.baidu.com/',\n  },\n  {\n    rect: NSMakeRect(0, 0, 40, 40),\n    size: NSMakeSize(24, 24),\n    icon: 'palette',\n    activeIcon: 'palette-active',\n    tooltip: '调色板',\n    identifier: `${IdentifierPrefix}-menu.palette-${NSUUID.UUID().UUIDString()}`,\n    wkIdentifier: `${IdentifierPrefix}-webview.palette-${NSUUID.UUID().UUIDString()}`,\n    type: 2,\n    inGravityType: 1,\n    url: 'http://m.baidu.com/',\n  },\n  {\n    rect: NSMakeRect(0, 0, 40, 40),\n    size: NSMakeSize(24, 24),\n    icon: 'fill',\n    activeIcon: 'fill-active',\n    tooltip: '填充',\n    identifier: `${IdentifierPrefix}-menu.fill-${NSUUID.UUID().UUIDString()}`,\n    wkIdentifier: `${IdentifierPrefix}-webview.fill-${NSUUID.UUID().UUIDString()}`,\n    type: 2,\n    inGravityType: 1,\n    url: 'http://m.baidu.com/',\n  },\n  {\n    rect: NSMakeRect(0, 0, 40, 40),\n    size: NSMakeSize(24, 24),\n    icon: 'help',\n    activeIcon: 'help-active',\n    tooltip: '帮助中心',\n    identifier: `${IdentifierPrefix}-menu.help-${NSUUID.UUID().UUIDString()}`,\n    wkIdentifier: `${IdentifierPrefix}-webview.help-${NSUUID.UUID().UUIDString()}`,\n    type: 2,\n    inGravityType: 3,\n    url: 'http://m.baidu.com/',\n  },\n  {\n    rect: NSMakeRect(0, 0, 40, 40),\n    size: NSMakeSize(24, 24),\n    icon: 'setting',\n    activeIcon: 'setting-active',\n    tooltip: '设置',\n    identifier: `${IdentifierPrefix}-menu.setting-${NSUUID.UUID().UUIDString()}`,\n    wkIdentifier: `${IdentifierPrefix}-webview.setting-${NSUUID.UUID().UUIDString()}`,\n    type: 2,\n    inGravityType: 3,\n    url: 'http://m.baidu.com/',\n  }\n]\n\n","export let context\nexport let document\nexport let version\nexport let sketchVersion\nexport let pluginFolderPath\nexport let resourcesPath\n\nfunction getPluginFolderPath (context) {\n  // Get absolute folder path of plugin\n  const split = context.scriptPath.split('/')\n  split.splice(-3, 3)\n  return split.join('/')\n}\n\nexport default function (ctx) {\n  context = ctx\n  document = context.document || MSDocument.currentDocument()\n  // eslint-disable-next-line no-new-wrappers\n  version = new String(context.plugin.version()).toString()\n  // eslint-disable-next-line no-new-wrappers\n  sketchVersion = new String(context.api().version).toString()\n  pluginFolderPath = getPluginFolderPath(context)\n  resourcesPath = `${pluginFolderPath}/Contents/Resources`\n}\n","import { context } from '../session'\n\n/**\n * getImageURL 获取 icon 路径\n * @param {*} name\n */\nexport const getImageURL = name => {\n  const isRetinaDisplay = NSScreen.mainScreen().backingScaleFactor() > 1\n  const suffix = isRetinaDisplay ? '@2x' : ''\n  const pluginSketch = context.plugin.url()\n  const imageURL = pluginSketch\n    .URLByAppendingPathComponent('Contents')\n    .URLByAppendingPathComponent('Resources')\n    .URLByAppendingPathComponent('icons')\n    .URLByAppendingPathComponent(`${name + suffix}.png`)\n  return imageURL\n}\n\n/**\n * createImage 创建 NSImage\n * @param {*} imageURL\n * @param {*} size\n */\nexport const createImage = (imageURL, size) => {\n  // NSImage.alloc().initWithSize([width, height])\n  const Image = NSImage.alloc().initWithContentsOfURL(imageURL)\n  size && Image.setSize(size)\n  Image.setScalesWhenResized(true)\n  return Image\n}\n\n/**\n * createImageView 创建 NSImageView\n * @param {*} rect\n * @param {*} icon\n * @param {*} size\n */\nexport const createImageView = (rect, icon, size) => {\n  const imageView = NSImageView.alloc().initWithFrame(rect)\n  const imageURL = getImageURL(icon)\n  const image = createImage(imageURL, size)\n  imageView.setImage(image)\n  imageView.setAutoresizingMask(5)\n  return imageView\n}\n\n/**\n * createImageView 创建 NSBoxSeparator\n */\nexport const createBoxSeparator = () => {\n  // set to 0 in width and height\n  const separtorBox = NSBox.alloc().initWithFrame(NSZeroRect)\n  // Specifies that the box is a separator\n  separtorBox.setBoxType(2 || NSBoxSeparator)\n  separtorBox.setBorderColor(NSColor.colorWithHex('#F5F5F5'))\n  try {\n    separtorBox.setBorderColor(NSColor.colorWithSRGBRed_green_blue_alpha(1.0, 1.0, 1.0, 1.0))\n  } catch (error) {\n    console.error(error)\n  }\n\n  // separtorBox.setTransparent(true)\n  return separtorBox\n}\n\n/**\n * addButton 创建 NSButton\n * @param {*} param { rect, size, icon, activeIcon, tooltip = '', type = 5, callAction }\n */\nexport const addButton = ({ rect, size, icon, activeIcon, tooltip = '', type = 5, callAction }) => {\n  const button = rect ? NSButton.alloc().initWithFrame(rect) : NSButton.alloc().init()\n  const imageURL = getImageURL(icon)\n  const image = createImage(imageURL, size)\n  button.setImage(image)\n\n  if (activeIcon) {\n    const activeImageURL = getImageURL(activeIcon)\n    const activeImage = createImage(activeImageURL, size)\n    button.setAlternateImage(activeImage)\n  } else {\n    button.setAlternateImage(image)\n  }\n  button.setBordered(false)\n  button.sizeToFit()\n  button.setToolTip(tooltip)\n  button.setButtonType(type || NSMomentaryChangeButton)\n  button.setCOSJSTargetFunction(callAction)\n  button.setAction('callAction:')\n  button.removeBadge = () => {\n    button.setImage(image)\n    button.hasBadge = false\n  }\n  button.icon = icon\n  return button\n}\n\n/**\n * 创建 bounds\n * @param {*} x\n * @param {*} y\n * @param {*} width\n * @param {*} height\n */\nexport const createBounds = (x = 0, y = 0, width = 0, height = 0) => NSMakeRect(\n  x,\n  y,\n  width,\n  height\n)\n\n/**\n * createView 创建 NSPanel\n * @param {*} frame  options\n */\nexport const createPanel = (options = {\n  width: 800,\n  height: 600,\n  minWidth: 0,\n  minHeight: 0,\n  x: 0,\n  y: 0,\n  title: 'panel',\n  identifier: 'sketch-panel',\n  vibrancy: true,\n}) => {\n  COScript.currentCOScript().setShouldKeepAround(true)\n\n  const threadDictionary = NSThread.mainThread().threadDictionary()\n  const mainScreenRect = NSScreen.screens()\n    .firstObject()\n    .frame()\n\n  const Bounds = NSMakeRect(\n    options.x ? options.x : Math.round((NSWidth(mainScreenRect) - options.width) / 2),\n    options.y ? NSHeight(mainScreenRect) - options.y : Math.round((NSHeight(mainScreenRect) - options.height) / 2),\n    options.width,\n    options.height\n  )\n  const panel = NSPanel.alloc().init()\n  panel.setFrame_display(Bounds, true)\n  panel.setOpaque(0)\n  threadDictionary[options.identifier] = panel\n\n  // NSWindowStyleMaskDocModalWindow 直角\n  panel.setStyleMask(NSWindowStyleMaskFullSizeContentView | NSBorderlessWindowMask | NSResizableWindowMask | NSTexturedBackgroundWindowMask | NSTitledWindowMask | NSClosableWindowMask | NSFullSizeContentViewWindowMask | NSWindowStyleMaskResizable)\n  panel.setBackgroundColor(NSColor.whiteColor() || NSColor.windowBackgroundColor())\n\n  panel.title = options.title\n  panel.movableByWindowBackground = true\n  panel.titlebarAppearsTransparent = true\n  panel.titleVisibility = NSWindowTitleHidden\n\n  panel.center()\n  panel.makeKeyAndOrderFront(null)\n  panel.setLevel(NSFloatingWindowLevel)\n  panel.minSize = NSMakeSize(options.minWidth, options.minHeight)\n\n  panel.standardWindowButton(NSWindowZoomButton).setHidden(true)\n  panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true)\n  panel.standardWindowButton(NSWindowCloseButton).setHidden(true)\n\n  // Some third-party macOS utilities check the zoom button's enabled state to\n  // determine whether to show custom UI on hover, so we disable it here to\n  // prevent them from doing so in a frameless app window.\n  panel.standardWindowButton(NSWindowZoomButton).setEnabled(false)\n\n  // The fullscreen button should always be hidden for frameless window.\n  if (panel.standardWindowButton(NSWindowFullScreenButton)) {\n    panel.standardWindowButton(NSWindowFullScreenButton).setHidden(true)\n  }\n\n  panel.showsToolbarButton = false\n  panel.movableByWindowBackground = true\n\n  if (options.vibrancy) {\n    // Create the blurred background\n    const effectView = NSVisualEffectView.alloc().initWithFrame(NSMakeRect(0, 0, options.width, options.height))\n    effectView.setMaterial(NSVisualEffectMaterialPopover)\n    effectView.setAutoresizingMask(NSViewWidthSizable | NSViewHeightSizable)\n    effectView.setAppearance(NSAppearance.appearanceNamed(NSAppearanceNameVibrantLight))\n    effectView.setBlendingMode(NSVisualEffectBlendingModeBehindWindow)\n\n    // Add it to the panel\n    panel.contentView().addSubview(effectView)\n  }\n\n  const closeButton = panel.standardWindowButton(NSWindowCloseButton)\n  closeButton.setCOSJSTargetFunction(sender => {\n    log(sender)\n\n    panel.close()\n\n    // Remove the reference to the panel\n    threadDictionary.removeObjectForKey(options.identifier)\n\n    // Stop this Long-running script\n    COScript.currentCOScript().setShouldKeepAround(false)\n  })\n  return panel\n}\n\n/**\n * createView 创建 NSView\n * @param {*} frame  NSMakeRect(0, 0, 40, 40)\n */\nexport const createView = frame => {\n  const view = NSView.alloc().initWithFrame(frame)\n  view.setFlipped(1)\n  return view\n}\n\n/**\n * createBox 创建 NSBox\n * @param {*} frame  NSMakeRect(0, 0, 40, 40)\n */\nexport const createBox = frame => {\n  const box = NSBox.alloc().initWithFrame(frame)\n  box.setTitle('')\n  return box\n}\n\n\n/**\n * createBox 创建 createTextField\n * @param {*} string\n * @param {*} frame NSMakeRect(0, 0, 40, 40)\n */\nexport const createTextField = (string, frame) => {\n  const field = NSTextField.alloc().initWithFrame(frame)\n\n  field.setStringValue(string)\n  field.setFont(NSFont.systemFontOfSize(12))\n  field.setTextColor(\n    NSColor.colorWithCalibratedRed_green_blue_alpha(0, 0, 0, 0.7)\n  )\n  field.setBezeled(0)\n  field.setBackgroundColor(NSColor.windowBackgroundColor())\n  field.setEditable(0)\n\n  return field\n}\n\n","/**\n * File 文件操作\n * NSString.stringWithFormat('%@', content)\n */\n\nexport const File = {\n  fileManager: NSFileManager.defaultManager(),\n\n  _stringify (jsonData, opt) {\n    opt = opt ? 1 : 0\n    const nsJson = NSJSONSerialization.dataWithJSONObject_options_error_(jsonData, opt, nil)\n    return NSString.alloc().initWithData_encoding(nsJson, 4)\n  },\n\n  writeFile (content, path) {\n    content = NSString.stringWithFormat('%@', content)\n    path = NSString.stringWithFormat('%@', path)\n    return content.writeToFile_atomically_encoding_error_(path, !0, 4, nil)\n  },\n\n  copyFile (path, dist) {\n    return this.fileManager.fileExistsAtPath(path) ? this.fileManager.copyItemAtPath_toPath_error(path, dist, nil) : nil\n  },\n\n  mkDir (path) {\n    return !this.fileManager.fileExistsAtPath(path) && this.fileManager.createDirectoryAtPath_withIntermediateDirectories_attributes_error_(path, !0, nil, nil)\n  },\n\n  readJSON (path, opt) {\n    const src = NSData.dataWithContentsOfFile(path)\n    const options = !0 === opt ? 1 : 0\n    return NSJSONSerialization.JSONObjectWithData_options_error(src, options, nil)\n  },\n\n  size (patch) {\n    let size = 0\n    try {\n      size = this.fileManager.attributesOfItemAtPath_error(patch, nil).NSFileSize\n    } catch (e) {\n      size = 0\n    }\n    return size\n  },\n\n  renameFile (from, to) {\n    this.fileManager.fileExistsAtPath(from) && this.fileManager.moveItemAtPath_toPath_error(from, to, null)\n  },\n\n  exist (path) {\n    return !!this.fileManager.fileExistsAtPath(path)\n  },\n\n  readDir (path) {\n    return !!this.fileManager.fileExistsAtPath(path) && this.fileManager.contentsOfDirectoryAtPath_error_(path, nil)\n  },\n\n  removeDir (path) {\n    this.fileManager.removeItemAtPath_error(path, null)\n  },\n\n  getTempDirPath () {\n    const URL = this.fileManager.URLsForDirectory_inDomains(13, 1).lastObject()\n    const hash = Date.now() / 1e3\n    const nsString = NSString.stringWithFormat('%@', hash)\n    return URL.URLByAppendingPathComponent(nsString).path()\n  },\n\n  mkTempDir (path) {\n    const URL = this.getTempDirPath(path)\n    return this.mkDir(URL) || URL\n  },\n\n  /**\n   * @param {String} image\n   * @param {MSImageData} image\n   */\n  saveImage (path, image) {\n    const tiffData = image.TIFFRepresentation()\n    const p = NSBitmapImageRep.imageRepWithData(tiffData)\n    const data = p.representationUsingType_properties(NSPNGFileType, null)\n    data.writeToFile_atomically(path, !0)\n  },\n\n  jsonFilePaths (path) {\n    let filename\n    const ds = this.fileManager.enumeratorAtPath(path)\n    const paths = []\n    // eslint-disable-next-line no-cond-assign\n    while (filename = ds.nextObject()) {\n      if (filename.pathExtension() == 'json') {\n        paths.push(filename)\n      }\n    }\n\n    return paths\n  }\n}\n","export * from './element'\nexport * from './selector'\nexport * from './system'\nexport * from './file'\n","import { context } from '../session'\nimport sketch from 'sketch'\n\n\n/**\n * getSketchSelected 获取当前选择的 document， page， selection\n */\nexport const getSketchSelected = () => {\n  const Document = sketch.Document\n  const document = Document.getSelectedDocument() // 当前被选择的 document\n  const page = document.selectedPage // 当前被选择的 page\n  const artboard = sketch.Artboard.fromNative(page._object.currentArtboard())\n  const selection = document.selectedLayers // 当前选择图层\n\n  return {\n    document,\n    page,\n    artboard,\n    selection,\n  }\n}\n\n\n/**\n * getSelected 获取当前 document、page、artboard、selection\n */\nexport const getSelected = () => {\n  const document = context.document // 获取 sketch 当前 document\n  const plugin = context.plugin\n  const command = context.command\n  const page = document.currentPage() // 当前被选择的 page\n  const artboards = page.artboards() // 所有的画板\n  const selectedArtboard = page.currentArtboard() // 当前被选择的画板\n  const selection = context.selection // 当前选择图层\n\n  return {\n    document,\n    plugin,\n    command,\n    page,\n    artboards,\n    selectedArtboard,\n    selection,\n  }\n}\n\n\n/**\n * 获取当前脚本执行路径\n * @param {*} context\n */\nexport const getScriptExecPath = context => context.scriptPath\n\n/**\n * getDocumentPath 获取所选择 document 路径\n */\nexport const getDocumentPath = () => {\n  const Document = context.document\n  return Document.fileURL() ? Document.fileURL().path() : nil\n}\n\n/**\n * getDocumentName 获取所选择 document name\n */\nexport const getDocumentName = () => (getDocumentPath(context) ? getDocumentPath(context).lastPathComponent() : nil)\n\n\n/**\n * dumpLayer 导出json数据\n * @param {*} sketchObject  如 context.document.currentPage()\n */\nexport const dumpLayer = sketchObject => {\n  // return NSDictionary\n  const jsonData = sketchObject.treeAsDictionary()\n  const nsData = NSJSONSerialization.dataWithJSONObject_options_error_(jsonData, 0, nil)\n  return NSString.alloc().initWithData_encoding_(nsData, 4)\n}\n\n/**\n * dumpSymbol 导出json数据\n * @param {*} symbolInstance // context.selection[0]\n */\nexport const dumpSymbol = symbolInstance => {\n  // return symbolInstance\n  const immutableInstance = symbolInstance.immutableModelObject()\n  return MSJSONDataArchiver.archiveStringWithRootObject_error(immutableInstance, nil)\n}\n","import MochaJSDelegate from 'mocha-js-delegate'\nimport { context } from '../session'\nimport { WINDOW_MOVE_INSTANCE, WINDOW_MOVE_SELECTOR } from '../common/config'\n\n/**\n * getNewUUID 获取唯一 ID\n */\nexport const getNewUUID = () => NSUUID.UUID().UUIDString()\n\n/**\n * getThreadDictForKey 获取挂载 mainThread 的键值\n * @param {string} key\n */\nexport const getThreadDictForKey = key => NSThread.mainThread().threadDictionary()[key]\n\n/**\n * setThreadDictForKey 挂载到 mainThread 的键值\n * @param {string} key\n * @param {string} value\n */\nexport const setThreadDictForKey = (key, value) => NSThread.mainThread().threadDictionary()[key] = value\n\n/**\n * removeThreadDictForKey 移除挂载到 mainThread 的键值\n * @param { string } key\n */\nexport const removeThreadDictForKey = key => {\n  if (NSThread.mainThread().threadDictionary()[key]) NSThread.mainThread().threadDictionary().removeObjectForKey(key)\n}\n\n/**\n * getSettingForKey 获取挂载 NSUserDefaults 的键值\n * @param { string } key\n */\nexport const getSettingForKey = key => NSUserDefaults.standardUserDefaults().objectForKey(key)\n\n/**\n * setSettingForKey 挂载到 NSUserDefaults 的键值\n * @param {string} key\n * @param {string} value\n */\nexport const setSettingForKey = (key, value) => NSUserDefaults.standardUserDefaults().setObject_forKey(value, key)\n\n/**\n * removeSettingForKey 移除挂载到 NSUserDefaults 的键值\n * @param { string } key\n */\nexport const removeSettingForKey = key => {\n  setSettingForKey(key, nil)\n}\n\n/**\n * showPluginsPane 显示 plugin window\n */\nexport const showPluginsPane = () => {\n  const identifier = MSPluginsPreferencePane.identifier()\n  const preferencesController = MSPreferencesController.sharedController()\n  preferencesController.switchToPaneWithIdentifier(identifier)\n  preferencesController.currentPreferencePane().tableView().reloadData()\n}\n\n/**\n * showLibrariesPane 显示 libraries window\n */\nexport const showLibrariesPane = () => {\n  const identifier = MSAssetLibrariesPreferencePane.identifier()\n  const preferencesController = MSPreferencesController.sharedController()\n  preferencesController.switchToPaneWithIdentifier(identifier)\n  preferencesController.currentPreferencePane().tableView().reloadData()\n}\n\n/**\n * getSystemVersion 获取系统版本\n */\nexport const getSystemVersion = () => {\n  try {\n    const systemVersion = NSProcessInfo.processInfo().operatingSystemVersionString().match(/\\d*\\.\\d*(\\.\\d*)?/)\n    if (systemVersion && systemVersion[0]) {\n      const versions = systemVersion[0]\n      return versions.split('.').length === 2 ? ''.concat(versions, '.0') : versions\n    }\n    return '0.0.0'\n  } catch (e) {\n    return '0.0.0'\n  }\n}\n\n/**\n * getPluginVersion 获取插件版本\n */\nexport const getPluginVersion = () => context.plugin.version()\n\n/**\n * reloadPlugins 重载插件\n */\nexport const reloadPlugins = () => {\n  AppController.sharedInstance().pluginManager().reloadPlugins()\n}\n\n/**\n * getFileContentFromModal 打开文件选择器，获取文件的文本内容\n * @param {Array<string>} fileTypes 文件类型\n */\nexport const getFileContentFromModal = (fileTypes = []) => {\n  const openPanel = NSOpenPanel.openPanel()\n\n  openPanel.setTitle('Choose a JSON File')\n  openPanel.canCreateDirectories = false\n  openPanel.canChooseFiles = true\n  openPanel.allowedFileTypes = fileTypes\n\n  const openPanelButtonPressed = openPanel.runModal()\n  if (openPanelButtonPressed === NSModalResponseOK) {\n    const filePath = openPanel.URL().path()\n    return NSString.stringWithContentsOfFile_encoding_error(filePath, NSUTF8StringEncoding, nil)\n  }\n\n  return ''\n}\n\n/**\n * getSavePathFromModal 获取文件的存储路径\n * @param {String} fileName 文件名\n * @param {Array<string>} fileTypes 文件类型\n */\nexport const getSavePathFromModal = (fileName, fileTypes = ['json']) => {\n  if (!fileName) return\n  const savePanel = NSSavePanel.savePanel()\n  savePanel.canCreateDirectories = true\n  savePanel.nameFieldStringValue = fileName\n  savePanel.allowedFileTypes = fileTypes\n\n  const savePanelActionStatus = savePanel.runModal()\n  if (savePanelActionStatus === NSModalResponseOK) {\n    const filePath = savePanel.URL().path()\n    return {\n      filePath,\n      fileName: savePanel.nameFieldStringValue(),\n    }\n  }\n\n  return false\n}\n\n/**\n * observerWindowResizeNotification 监听窗口resize\n * @param {*} fn\n */\nexport const observerWindowResizeNotification = fn => {\n  // Keep script around, otherwise everything will be dumped once its run\n  // COScript.currentCOScript().setShouldKeepAround(true)\n\n  if (!getThreadDictForKey(WINDOW_MOVE_INSTANCE)) {\n    // Create a selector\n    const Selector = NSSelectorFromString('onWindowMove:')\n\n    const delegate = new MochaJSDelegate({\n      'onWindowMove:': notification => {\n        // const bounds = NSScreen.mainScreen().frame()\n        fn(notification)\n        // log(notification)\n        // NSNotificationCenter.defaultCenter().removeObserver_name_object(delegateInstance, NSWindowDidResizeNotification, nil)\n      }\n    })\n\n    // Don't forget to create a class instance of the delegate\n    const delegateInstance = delegate.getClassInstance()\n\n    NSNotificationCenter\n      .defaultCenter()\n      .addObserver_selector_name_object(delegateInstance, Selector, NSWindowDidResizeNotification, nil)\n\n    setThreadDictForKey(WINDOW_MOVE_INSTANCE, delegateInstance)\n    setThreadDictForKey(WINDOW_MOVE_SELECTOR, Selector)\n  }\n}\n\n/**\n * removeObserverWindowResizeNotification 清除监听窗口resize\n * @param {*} fn\n */\nexport const removeObserverWindowResizeNotification = () => {\n  const delegateInstance = getThreadDictForKey(WINDOW_MOVE_INSTANCE)\n  if (delegateInstance) {\n    NSNotificationCenter.defaultCenter().removeObserver_name_object(delegateInstance, NSWindowDidResizeNotification, nil)\n    removeThreadDictForKey(WINDOW_MOVE_INSTANCE)\n    removeThreadDictForKey(WINDOW_MOVE_SELECTOR)\n  }\n}\n","module.exports = require(\"sketch\");"],"sourceRoot":""}